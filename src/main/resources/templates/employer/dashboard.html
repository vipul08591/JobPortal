<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Employer Dashboard - JobPortal</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 min-h-screen font-sans">

<!-- Header -->
<nav class="bg-white shadow-md sticky top-0 z-10">
    <div class="max-w-6xl mx-auto px-6 py-4 flex justify-between items-center">
        <h1 class="text-2xl font-bold text-blue-600">
            <a th:href="@{/employer/dashboard}">Job Portal</a>
        </h1>
        <div class="flex items-center gap-6">
          
            <button onclick="openLogoutModal()" class="text-red-600 hover:text-red-800 font-medium">Logout</button>
        </div>
    </div>
</nav>

<!-- Logout Modal -->
<div id="logoutModal" class="fixed inset-0 bg-black bg-opacity-30 hidden justify-center items-center z-50">
    <div class="bg-white p-6 rounded shadow-md max-w-sm w-full">
        <h2 class="text-lg font-semibold mb-4 text-gray-800">Confirm Logout</h2>
        <p class="mb-6 text-gray-600">Are you sure you want to logout?</p>
        <div class="flex justify-end gap-4">
            <button onclick="closeLogoutModal()" class="text-gray-600 hover:text-gray-800 text-sm">Cancel</button>
            <form th:action="@{/logout}" method="post">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                <button type="submit" class="text-red-600 hover:text-red-800 text-sm">Logout</button>
            </form>
        </div>
    </div>
</div>

<main class="max-w-6xl mx-auto px-6 py-8 space-y-6">

    <!-- Post Job Link -->
    <div class="flex justify-between items-center">
        <h2 class="text-xl font-semibold text-gray-800">Your Jobs</h2>
        <a href="/employer/jobs/new" 
           class="text-blue-600 hover:text-blue-800 font-semibold text-lg px-4 py-2 border border-transparent hover:border-blue-300 rounded transition">
           + Post New Job
        </a>
    </div>

    <!-- Jobs Grid -->
  <!-- Jobs Grid -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
    <div th:each="job : ${jobs}" 
         class="bg-white rounded shadow-sm hover:shadow-md transition p-5 space-y-2">
        
        <!-- Job Title as Link -->
        <h3 class="text-lg font-medium text-gray-800">
    <a th:href="@{/employer/jobs/{id}(id=${job.id})}" 
       class="text-blue-600 hover:text-blue-800 underline transition">
       <span th:text="${job.title}">Job Title</span>
    </a>
</h3>
        <p class="text-gray-600 flex items-center gap-2 text-sm">
            <strong>Company:</strong> <span th:text="${job.companyName}">Company Name</span>
        </p>
        <p class="text-gray-600 flex items-center gap-2 text-sm">
            <strong>Location:</strong> <span th:text="${job.location}">Job Location</span>
        </p>
        <p class="text-gray-600 flex items-center gap-2 text-sm">
            <strong>Type:</strong> <span th:text="${job.type}">Full-Time</span>
        </p>
        <p class="text-gray-600 flex items-center gap-2 text-sm">
            <strong>Salary:</strong> <span th:text="${job.salary}">â‚¹50k-70k/month</span>
        </p>
        <p class="text-gray-600 text-sm">
            <strong>Posted At:</strong> <span th:text="${#temporals.format(job.postedAt, 'yyyy-MM-dd HH:mm')}">2025-09-28 08:00</span>
        </p>

        <!-- Action Links -->
        <div class="flex gap-4 mt-3 text-sm">
            <a th:href="@{/employer/jobs/{id}/applications(id=${job.id})}" 
               class="text-green-600 hover:text-green-800 font-medium transition">Applications</a>
            <a href="#" th:onclick="'openDeleteModal(' + ${job.id} + ')'" 
               class="text-red-600 hover:text-red-800 font-medium transition">Delete</a>
        </div>
    </div>
</div>

    

    <!-- Empty State -->
    <div th:if="${jobs.size() == 0}" class="text-center text-gray-400 mt-8">
        No jobs posted yet.
    </div>
</main>

<!-- Delete Modal -->
<div id="deleteModal" class="fixed inset-0 bg-black bg-opacity-30 hidden items-center justify-center z-50">
    <div class="bg-white p-6 rounded shadow-md max-w-sm w-full">
        <h2 class="text-lg font-semibold mb-4 text-gray-800">Confirm Delete</h2>
        <p class="mb-6 text-gray-600">Are you sure you want to delete this job?</p>
        <div class="flex justify-end gap-4">
            <button onclick="closeDeleteModal()" class="text-gray-600 hover:text-gray-800 text-sm">Cancel</button>
            <form id="deleteForm" method="post">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                <button type="submit" class="text-red-600 hover:text-red-800 text-sm">Delete</button>
            </form>
        </div>
    </div>
</div>

<script>
    function openLogoutModal() { document.getElementById('logoutModal').classList.replace('hidden', 'flex'); }
    function closeLogoutModal() { document.getElementById('logoutModal').classList.replace('flex', 'hidden'); }
    function openDeleteModal(jobId) {
        document.getElementById('deleteForm').action = `/employer/jobs/${jobId}/delete`;
        document.getElementById('deleteModal').classList.replace('hidden', 'flex');
    }
    function closeDeleteModal() { document.getElementById('deleteModal').classList.replace('flex', 'hidden'); }
</script>

</body>
</html>
